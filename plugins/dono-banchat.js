
//âŒ¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//â”ƒ  à¼’ ğ‘«ğ‘¬ğ‘½ğ‘¬ğ‘³ğ‘¶ğ‘·ğ‘¬ğ‘« ğ‘©ğ’€ ğ‘¯ğ‘¬ğ‘µğ‘¹ğ’€ ğ‘¨ğ‘¹ğ‘ªğ‘¨ğ‘µğ‘®ğ‘¬ğ‘³ğ‘¶  à¼’
//â”ƒâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
//â”ƒ âœà¦”à§£ ğ™¿ğš•ğšğšŠğšœğš ğšŒğš›ğšğšğš’ğš ğš’ğš ğš¢ğš˜ğš ğšğšœğš ğšğš‘ğš ğšŒğš˜ğšğš à¦”à§£âœ
//â”ƒ ğ–¤ ğ˜¾ğ™¤ğ™£ğ™©ğ™–ğ™˜ğ™©-ğ™¢ğ™š ğ™›ğ™¤ğ™§ ğ™–ğ™£ğ™® ğ™™ğ™¤ğ™ªğ™—ğ™©
// â•°â”€...âŒ¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€


import schedule from 'node-schedule'

function pickRandom(list) { return list[Math.floor(Math.random() * list.length)]}
let handler = async (m,{args,command}) => {
  process.env.TZ = 'America/Sao_Paulo';

  const horaatual = moment().tz('America/Sao_Paulo').format('HH:mm')
  const scheduledTime = new Date();
  /*
  
  
  
  
  
  scheduledTime.setHours(hours, minutes, 0, 0);

  // Schedule the task
  console.log('Scheduled time:', scheduledTime);
  
  const horario = args[0]
  const [hours, minutes] = horario.split(':').map(Number); */
  let chat = global.db.data.chats[m.chat]
  try{
 
  if (args[0]) {
    if(command='desligar'){
      chat.isBanned = true
    }
    else{
      chat.modoadmin = true
    }
    const currentDateTime = new Date();
const currentHours = currentDateTime.getHours();
const currentMinutes = currentDateTime.getMinutes();
const currentSeconds = currentDateTime.getSeconds();

let timeoutset;

if (args[0].includes(':')) {
  // User input is in the format HH:mm or HH:mm:ss
  const [hours, minutes, seconds] = args[0].split(':').map(Number);

  // Check if seconds are present, otherwise default to 0
  const totalSeconds = isNaN(seconds) ? 0 : seconds;

  timeoutset = (hours * 3600 + minutes * 60 + totalSeconds) * 1000; // Convert hours, minutes, and seconds to milliseconds
} else {
  // User input is in hours
  timeoutset = args[0] * 3600000; // Convert hours to milliseconds
}
console.log(timeoutset)
const newScheduledTime = new Date(currentDateTime.getTime() + timeoutset);


let tempo = formatTime(timeoutset)

   m.reply(`${eg} âš ï¸ BOT DESATIVADO âš ï¸ \n 
â–â”€â”…â”€â”€â”…\nğŸ’€ COMANDOS INDISPONÃVEIS POR ${tempo}\nâ”€â”…â”€â”€â”…â– 

${pickRandom([ 
 "Adeus, como uma sombra que se dissipa com o nascer do sol, parto para o alÃ©m.",
  "Assim como o vento leva as folhas secas, minha despedida Ã© suave, mas inevitÃ¡vel.",
  "Parto desta existÃªncia como um barco que se afasta silenciosamente no crepÃºsculo.",
  "Da encruzilhada da vida, escolho o caminho da despedida, deixando para trÃ¡s memÃ³rias e mistÃ©rios.",
  "Como um eco que desvanece na distÃ¢ncia, minha presenÃ§a se desvanece no horizonte do adeus.",
  "Na penumbra da despedida, deixo para trÃ¡s a trama intricada da vida para encontrar o desconhecido.",
  "Assim como a Ãºltima nota de uma melodia, minha despedida ressoa no silÃªncio que se segue.",
  "Deixo este palco como um ator apÃ³s sua Ãºltima cena, desaparecendo nas cortinas do destino.",
  "Como as sombras da noite que se retiram com a luz da aurora, eu me despeÃ§o da escuridÃ£o.",
  "Nas asas da despedida, como um corvo solitÃ¡rio, alÃ§o voo para longe dos domÃ­nios conhecidos."
])}
  -- ğ“”ğ“­ğ“°ğ“ªğ“» ğ“. ğŸˆâ€â¬›`) 
  const horarioBot = new Date();
horarioBot.setHours(newScheduledTime.getHours(), newScheduledTime.getMinutes(),newScheduledTime.getSeconds() , 0)

 schedule.scheduleJob(horarioBot, async () => {

  console.log('Executing scheduled task...');

  
  global.db.data.chats[m.chat].isBanned = false
m.reply(`${eg} â–â”€â”…â”€â”€â”…\nğŸ“œâœ’ï¸ BOT REATIVADO NOVAMENTE\nâ”€â”…â”€â”€â”…â– 

${pickRandom([

"Voltei do vale da sombra da morte para contemplar mais uma vez a luz do dia.",
  "Como um corvo que retorna ao seu poleiro, estou de volta para encarar os enigmas da existÃªncia.",
  "Dos abismos sombrios emergi, pronto para saudar novamente o mundo dos vivos.",
  "Do limiar entre o sono e a vigÃ­lia, regresso Ã  realidade com olhos reavivados.",
  "As portas do desconhecido se abriram e eu, como um espectro ressurgido, retorno Ã  vida.",
  "ApÃ³s vagar por terras obscuras, retorno como uma fÃªnix, pronto para renascer das cinzas.",
  "Das profundezas do esquecimento, retornei para reescrever minha prÃ³pria histÃ³ria.",
  "As sombras da ausÃªncia dissiparam-se, e estou de volta para abraÃ§ar a luz da presenÃ§a.",
  "Como um viajante perdido retorna Ã  senda certa, aqui estou eu, de volta aos caminhos familiares.",
  "Das trevas do exÃ­lio, retorno com palavras de reconciliaÃ§Ã£o e boas-vindas."
])}
-- ğ“”ğ“­ğ“°ğ“ªğ“» ğ“.  ğŸˆâ€â¬›`)
  }); 
  
  
  
    
    return !0
  }
  
  else if(!args[0]){
  

m.reply(`âš ï¸ BOT DESATIVADO âš ï¸ \n 
â–â”€â”…â”€â”€â”…\nğŸ’€ COMANDOS TEMPORARIAMENTE INDISPONÃVEIS ATÃ‰ REATIVAÃ‡ÃƒO POR PARTE DOS ADMINS\nâ”€â”…â”€â”€â”…â– 
${pickRandom([ 
 "Adeus, como uma sombra que se dissipa com o nascer do sol, parto para o alÃ©m.",
  "Assim como o vento leva as folhas secas, minha despedida Ã© suave, mas inevitÃ¡vel.",
  "Parto desta existÃªncia como um barco que se afasta silenciosamente no crepÃºsculo.",
  "Da encruzilhada da vida, escolho o caminho da despedida, deixando para trÃ¡s memÃ³rias e mistÃ©rios.",
  "Como um eco que desvanece na distÃ¢ncia, minha presenÃ§a se desvanece no horizonte do adeus.",
  "Na penumbra da despedida, deixo para trÃ¡s a trama intricada da vida para encontrar o desconhecido.",
  "Assim como a Ãºltima nota de uma melodia, minha despedida ressoa no silÃªncio que se segue.",
  "Deixo este palco como um ator apÃ³s sua Ãºltima cena, desaparecendo nas cortinas do destino.",
  "Como as sombras da noite que se retiram com a luz da aurora, eu me despeÃ§o da escuridÃ£o.",
  "Nas asas da despedida, como um corvo solitÃ¡rio, alÃ§o voo para longe dos domÃ­nios conhecidos."
])}
  -- ğ“”ğ“­ğ“°ğ“ªğ“» ğ“. ğŸˆâ€â¬›`)
      if(command='desligar'){
      chat.isBanned = true
    }
    else{
      chat.modoadmin = true
    }
  m.react("âœ…")
}}
catch(e){
  await m.reply("erro â¸¸")
  console.log(e)
}

}
handler.help = ['banchat']
handler.tags = ['owner']
handler.command = /^botoff|mutebot|desligar/i
handler.botAdmin = false
handler.admin = true 
export default handler

function formatTime(milliseconds) {
  const totalSeconds = Math.floor(milliseconds / 1000);
  const hours = Math.floor(totalSeconds / 3600);
  const minutes = Math.floor((totalSeconds % 3600) / 60);
  const seconds = totalSeconds % 60;

  return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
}