
//âŒ¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//â”ƒ  à¼’ ğ‘«ğ‘¬ğ‘½ğ‘¬ğ‘³ğ‘¶ğ‘·ğ‘¬ğ‘« ğ‘©ğ’€ ğ‘¯ğ‘¬ğ‘µğ‘¹ğ’€ ğ‘¨ğ‘¹ğ‘ªğ‘¨ğ‘µğ‘®ğ‘¬ğ‘³ğ‘¶  à¼’
//â”ƒâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
//â”ƒ âœà¦”à§£ ğ™¿ğš•ğšğšŠğšœğš ğšŒğš›ğšğšğš’ğš ğš’ğš ğš¢ğš˜ğš ğšğšœğš ğšğš‘ğš ğšŒğš˜ğšğš à¦”à§£âœ
//â”ƒ ğ–¤ ğ˜¾ğ™¤ğ™£ğ™©ğ™–ğ™˜ğ™©-ğ™¢ğ™š ğ™›ğ™¤ğ™§ ğ™–ğ™£ğ™® ğ™™ğ™¤ğ™ªğ™—ğ™©
// â•°â”€...âŒ¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

//âŒ¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//â”ƒ  à¼’ ğ‘«ğ‘¬ğ‘½ğ‘¬ğ‘³ğ‘¶ğ‘·ğ‘¬ğ‘« ğ‘©ğ’€ ğ‘¯ğ‘¬ğ‘µğ‘¹ğ’€ ğ‘¨ğ‘¹ğ‘ªğ‘¨ğ‘µğ‘®ğ‘¬ğ‘³ğ‘¶  à¼’
//â”ƒâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ
//â”ƒ âœà¦”à§£ ğ™¿ğš•ğšğšŠğšœğš ğšŒğš›ğšğšğš’ğš ğš’ğš ğš¢ğš˜ğš ğšğšœğš ğšğš‘ğš ğšŒğš˜ğšğš à¦”à§£âœ
//â”ƒ ğ–¤ ğ˜¾ğ™¤ğ™£ğ™©ğ™–ğ™˜ğ™©-ğ™¢ğ™š ğ™›ğ™¤ğ™§ ğ™–ğ™£ğ™® ğ™™ğ™¤ğ™ªğ™—ğ™©
// â•°â”€...âŒ¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

const toxicRegex = /bolsomito|vadia|seu burro|sua burra|Ã© burro|Ã© burra|eh burro|eh burra|qenga|Quenga|Puta|imbecil|sua puta|vagabunda|lugar de mulher|esquerdalha|feminazi|seu merda|merdinha|Ã© rodada|eh rodada|pedaÃ§o de merda|seu bosta|seu lixo|neguinho|preto de merda|crioulo vagabundo|selvagem africano|negro serviÃ§al|sai da senzala|mulher negra promÃ­scua|crioulo fedido|escravo inÃºtil|negro burro|negro sujo|escÃ³ria negra|crioulo malandro|negro ordinÃ¡rio|negro safado|crioulo traidor|negro delinquente|crioulo pilantra|negro favelado|crioulo sem vergonha|negro imprestÃ¡vel|crioulo sem carÃ¡ter|negro maloqueiro|crioulo nojento|negro vagabundo|crioulo desgraÃ§ado|negro marginal|crioulo asqueroso|negro desgraÃ§ado|vadia|sua burra|Ã© burra|eh burra|sua puta|lugar de mulher|esquerdalha|feminazi|seu merda|merdinha|Ã© rodada|eh rodada|seu bosta|seu lixo|mulher no volante|mulher sÃ³ serve para cozinha|frÃ¡gil como uma mulher|mulher objeto|seja homem de verdade|bichinha delicada|sai do armÃ¡rio|sapatona de merda|mulherzinha fraca|mulher nÃ£o sabe nada|mulher no volante|mulher sÃ³ serve para cozinha|frÃ¡gil como uma mulher|ela estÃ¡ naqueles dias|mulher Ã© tudo igual|elas sÃ£o emocionais demais|mulheres nÃ£o deveriam trabalhar|ela estava pedindo por isso|mulheres sÃ£o ruins em matemÃ¡tica|mulheres sÃ£o histÃ©ricas|mulheres sÃ³ querem atenÃ§Ã£o|mulheres falam demais|mulheres sÃ£o volÃºveis|mulheres sÃ£o complicadas|mulheres sÃ£o fracas|mulheres sÃ£o manipuladoras|mulheres sÃ£o sensÃ­veis demais|mulheres sÃ£o fofoqueiras|mulheres sÃ£o inferiores|mulheres nÃ£o sÃ£o confiÃ¡veis/i

export async function before(m, { conn, isAdmin, isBotAdmin, isOwner }) {
  
  function getDataAtual() {
    const hoje = new Date();
    const dia = String(hoje.getDate()).padStart(2, '0');
    const mes = String(hoje.getMonth() + 1).padStart(2, '0'); // MÃªs comeÃ§a do zero, entÃ£o Ã© necessÃ¡rio adicionar 1
    const ano = hoje.getFullYear();

    return `${dia}/${mes}/${ano}`;
}
function generateRandomCode() {
    const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    const numbers = '0123456789';
    let code = '';

    // Generate 4 random numbers
    for (let i = 0; i < 4; i++) {
        code += numbers.charAt(Math.floor(Math.random() * numbers.length));
    }

    // Generate 1 random letter
    code += letters.charAt(Math.floor(Math.random() * letters.length));

    return code;
}


let tempBanimento = async (motivo) => {
  global.db.data.chats[m.chat].users[m.sender].tempBan = true
  
  console.log('1ğŸŒ™')
    const groupAdms = participants.filter(p => p.admin)

 let adms =[]
 const listaAdmin = groupAdms.map((v, i) =>
 adms.push(v.id))
 
  console.log('2ğŸŒ™')
 console.log(adms)
// Example usage:
adms = adms.filter(adm => adm !== conn.user.jid);
const adminAleatorio = adms.getRandom()
let destino = global.db.data.chats[m.chat].reportchat || adminAleatorio

  console.log('3ğŸŒ™')

 let teks;

 if (global.db.data.chats[m.chat].language === 'pt') {
         teks = `
     > robot@bytesec: #/users/ cat ${generateRandomCode()}.log
     > ---------------------------------------

     [!] ALERTA: UsuÃ¡rio Banido
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     > Protocolo: ${generateRandomCode()}
     > Data: ${getDataAtual()}

     >>> DETALHES DO USUÃRIO
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     > [+] Nome: ${m.name}
     > [+] Contato: @${m.sender.split`@`[0]}
     > [+] Grupo: ${groupMetadata.subject}

     >>> MOTIVO DO EXÃLIO
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     > ${motivo}

     > # OperaÃ§Ã£o realizada pela ByteSec. 
     > # Monitoramento constante.
     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         `;
} else if (global.db.data.chats[m.chat].language === 'en') {
   teks = `
> robot@bytesec: #/users/ cat ${generateRandomCode()}.log
> ---------------------------------------

[!] ALERT: User Banned
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
> Protocol: ${generateRandomCode()}
> Date: ${getDataAtual()}

>>> USER DETAILS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
> [+] Name: ${m.name}
> [+] Contact: @${m.sender.split`@`[0]}
> [+] Group: ${groupMetadata.subject}

>>> REASON FOR EXILE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
> ${motivo}
> â€ 
> # Operation conducted by ByteSec.
> # Under continuous surveillance.
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   `;
}
  
  m.reply(teks,destino)


//No longer available
let DELETEMESSAGE = await conn.sendMessage(m.chat, { delete: m.key })
   
  
console.log(DELETEMESSAGE.message.protocolMessage.key.id)

if(!global.db.data.chats[m.chat].ignored)
{
 global.db.data.chats[m.chat].ignored =[]
}
global.db.data.chats[m.chat].ignored.push(DELETEMESSAGE.message.protocolMessage.key.id)


await conn.groupParticipantsUpdate(m.chat, [m.sender], 'remove')

return !0
}


if (m.isBaileys && m.fromMe)
return !0
if (!m.isGroup)
return !1
if (global.db.data.chats[m.chat].isBanned)
return !1
  let user = global.db.data.users[m.sender]
  if (!user.warn) {
    user.warn=0
  }
  let chat = global.db.data.chats[m.chat]
  let bot = global.db.data.settings[this.user.jid] || {}
  let img = gataImg.getRandom()	
 const isToxic = toxicRegex.exec(m.text)
    
if (isToxic && chat.antitoxic && !isOwner && !isAdmin) {
global.db.data.chats[m.chat].users[m.sender].adv  += 1
if (!(global.db.data.chats[m.chat].users[m.sender].adv >= 3)) await m.reply(`â”â”â”â”â”â”â”â¬£âš ï¸â¬£â”â”â”â”â”â”
@${m.sender.split`@`[0]}* ğ“‚€

${lenguajeGB['smsToxic1']()}
${lenguajeGB['smsToxic2']()} 

   âš  *${global.db.data.chats[m.chat].users[m.sender].adv}/4*
   
${wm}`, false, { mentions: [m.sender] })}
/*await conn.sendButton(m.chat,`${user.warn == 1 ? `*@${m.sender.split`@`[0]}*` : `*@${m.sender.split`@`[0]}*`} *${lenguajeGB['smsToxic1']()} (${isToxic}) ${lenguajeGB['smsToxic2']()}*`, `${lenguajeGB['smsToxic3']()} *${user.warn}/4*\n\n${wm}`, img, [
[lenguajeGB.smsToxic4(), 'ok'],
[lenguajeGB.smsToxic5(), '.off antitoxic'],
[lenguajeGB.smsConMenu(), '/menu']], false, { mentions: [m.sender] })}*/

if (global.db.data.chats[m.chat].users[m.sender].adv >= 3) {
global.db.data.chats[m.chat].users[m.sender].adv  = 0
await m.reply(`*${lenguajeGB['smsToxic6']()}*\n*@${m.sender.split`@`[0]} ${lenguajeGB['smsToxic7']()}*`, false, { mentions: [m.sender] })


const banExplanationsEN = [
  "Just banned him for dropping some offensive nonsense in the group. Not on my watch.",
  "Gave him three strikes for disrespecting our laws on discrimination. Guess he didnâ€™t get the memo.",
  "Thatâ€™s right, kiddo. Banned him for being a total jerk to everyone here.",
  "Banned for spreading toxicity like itâ€™s his job. Not happening in this space.",
  "Told him the third strike would be his last. He clearly didnâ€™t take me seriously."
];

// Phrases in Portuguese
const banExplanationsPT = [
  "Acabei de banir ele por jogar algumas ofensas no grupo. NÃ£o sob minha vigilÃ¢ncia.",
  "Dei a ele trÃªs chances por desrespeitar nossas regras sobre discriminaÃ§Ã£o. Parece que ele nÃ£o pegou o recado.",
  "Isso mesmo, meu chapa. Banido por ser um completo idiota com todos aqui.",
  "Banido por espalhar toxicidade como se fosse seu trabalho. NÃ£o vai rolar neste espaÃ§o.",
  "Avisei que a terceira chance seria a Ãºltima. Ele claramente nÃ£o levou a sÃ©rio."
];

let explanations = global.db.data.chats[m.chat].language === 'pt' ? banExplanationsPT : banExplanationsEN;

await conn.groupParticipantsUpdate(m.chat, [m.sender], 'remove')
  await tempBanimento(explanations.getRandom())
//await this.updateBlockStatus(m.sender, 'block')
}
return !1
}
